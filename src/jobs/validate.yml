---
description: Validate pipeline image(s) and providing results on your environment and security risks based on your vulnerabilities
docker:
  - image: ubuntu:20.04
parameters:
  image_to_scan:
    type: string
    default: "no_image"
    description: The image name to scan. Depending on your usecase, this parameter is optional. If only one image is used in a pipeline, leave it blank. Enter the requested image name if using multiple images in a pipeline. See our user guide for more information.
steps:
  - attach_workspace:
      at: /tmp/rezilion
  - install_rezilion
  - run:
      name: Rezilion Validate
      environment:
        REZILION_IMAGE_TO_SCAN: <<parameters.image_to_scan>>
      command: << include(scripts/validate.sh) >>
  - store_artifacts:
      path: /tmp/rezilion/artifacts/
